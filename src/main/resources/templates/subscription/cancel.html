<!DOCTYPE html>
<html xmlns:th="https://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">

<head>
	<div th:replace="~{fragment :: meta}"></div>
	<div th:replace="~{fragment :: styles}"></div>

	<title>有料会員解約</title>
</head>

<body>
	<div class="nagoyamesi-wrapper">

		<div th:replace="~{fragment :: header}"></div>
		<main>
			<div class="container pt-4 pb-5 nagoyamesi-container">
				<div class="row justify-content-center">
					<div class="col-xl-5 col-lg-6 col-md-8">
						<nav class="mb-4" style="--bs-breadcrumb-divider: '>';" aria-label="breadcrumb">
							<ol class="breadcrumb mb-0">
								<li class="breadcrumb-item"><a th:href="@{/}">ホーム</a></li>
								<li class="breadcrumb-item active" aria-current="page">有料会員解約</li>
							</ol>
						</nav>

						<h1 class="mb-4 text-center">有料会員解約</h1>
						<p class="text-center">有料会員を解約しても宜しいですか？</p>

						<div th:if="${successMessage}" class="alert alert-info" role="alert">
							<span th:text="${successMessage}"></span>
						</div>

						<div class="row justify-content-center mb-4">
							<div class="col-lg-4">
								<button type="button" class="btn text-white shadow-sm w-100 nagoyamesi-btn-danger"
									data-bs-toggle="modal" data-bs-target="#cancelSubscriptionModal">
									解約する
								</button>
							</div>
						</div>
					</div>
				</div>
			</div>
		</main>
		<div th:replace="~{fragment :: footer}"></div>
	</div>

	<div class="modal fade" id="cancelSubscriptionModal" tabindex="-1" aria-labelledby="cancelSubscriptionModalLabel"
		aria-hidden="true">
		<div class="modal-dialog">
			<div class="modal-content">
				<div class="modal-header">
					<h5 class="modal-title" id="cancelSubscriptionModalLabel">解約確認</h5>
					<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="閉じる"></button>
				</div>
				<div class="modal-body">
					本当に有料会員を解約しますか？この操作は取り消せません。
				</div>
				<div class="modal-footer">
					<form method="post" th:action="@{/subscription/delete}">
						<button type="submit" class="btn btn-danger">解約する</button>
					</form>
					<button type="button" class="btn btn-secondary" data-bs-dismiss="modal">キャンセル</button>
				</div>
			</div>
		</div>
	</div>

	<div th:replace="~{fragment :: scripts}"></div>

	<script src="https://js.stripe.com/v3"></script>
	<script th:inline="javascript">
		const sessionId = /*[[${sessionId}]]*/"sessionId";
	</script>
	<script th:src="@{/js/stripe.js}"></script>
</body>

</html>